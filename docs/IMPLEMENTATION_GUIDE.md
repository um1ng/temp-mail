# ä¸´æ—¶é‚®ç®±æœåŠ¡å®æ–½æŒ‡å—

> ğŸ“… æ›´æ–°æ—¶é—´ï¼š2025å¹´1æœˆ  
> ğŸ¯ çŠ¶æ€ï¼šç”Ÿäº§å°±ç»ª  
> ğŸ¨ æ–°å¢ï¼šé‚®ä»¶é£æ ¼ç•Œé¢ + ä¸»é¢˜ç³»ç»Ÿ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/temp-mail.git
cd temp-mail

# å¿«é€Ÿè®¾ç½® (æ¨è)
pnpm setup

# æˆ–è€…æ‰‹åŠ¨å®‰è£…
pnpm install
docker-compose up -d
npx prisma generate
npx prisma migrate dev
pnpm dev
```

### 2. è®¿é—®åº”ç”¨

- **ä¸»åº”ç”¨**: http://localhost:3000
- **é‚®ä»¶ç®¡ç†**: http://localhost:8025 (MailHog)
- **æ•°æ®åº“ç®¡ç†**: http://localhost:8080 (Adminer)

## ğŸ¨ æ–°åŠŸèƒ½äº®ç‚¹

### ğŸ“§ é‚®ä»¶é£æ ¼ç•Œé¢
- **ä¸‰æ å¸ƒå±€** - ç±»ä¼¼ Gmail çš„ç°ä»£åŒ–è®¾è®¡
- **ä¾§è¾¹æ å¯¼èˆª** - é‚®ç®±ç®¡ç†ã€å¿«é€Ÿæ“ä½œ
- **é‚®ä»¶åˆ—è¡¨** - ç°ä»£åŒ–çš„é‚®ä»¶æ¦‚è§ˆ
- **è¯¦æƒ…é¢æ¿** - å®Œæ•´çš„é‚®ä»¶æŸ¥çœ‹ä½“éªŒ

### ğŸŒ— ä¸»é¢˜ç³»ç»Ÿ
- **å¤šä¸»é¢˜æ”¯æŒ** - æµ…è‰²/æ·±è‰²/ç³»ç»Ÿä¸»é¢˜
- **å¹³æ»‘åˆ‡æ¢** - æ— é—ªçƒçš„ä¸»é¢˜è¿‡æ¸¡
- **çŠ¶æ€æŒä¹…åŒ–** - è®°ä½ç”¨æˆ·çš„ä¸»é¢˜é€‰æ‹©
- **å“åº”å¼é€‚é…** - å®Œç¾é€‚é…å„ç§è®¾å¤‡

### ğŸ“± ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- **ç§»åŠ¨ç«¯é€‚é…** - è‡ªé€‚åº”å¸ƒå±€ï¼Œè§¦æ‘¸å‹å¥½
- **å¿«é€Ÿæ“ä½œ** - ä¸€é”®å¤åˆ¶ã€å‘é€æµ‹è¯•é‚®ä»¶
- **å®æ—¶åé¦ˆ** - æ“ä½œçŠ¶æ€å’Œç»“æœæç¤º
- **é”®ç›˜å¯¼èˆª** - æ”¯æŒå¿«æ·é”®æ“ä½œ

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ ¸å¿ƒç»„ä»¶

**å‰ç«¯ (Next.js 15 + React 19)**
- ğŸ¨ **ç°ä»£åŒ–ç•Œé¢** - Gmail é£æ ¼çš„é‚®ä»¶å¸ƒå±€
- ğŸŒ— **ä¸»é¢˜ç³»ç»Ÿ** - æ˜æš—æ¨¡å¼æ— ç¼åˆ‡æ¢
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…å„ç§è®¾å¤‡
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - å¿«é€ŸåŠ è½½å’Œå“åº”

**UI ç»„ä»¶ç³»ç»Ÿ**
- ğŸ¯ **shadcn/ui** - ç°ä»£åŒ–ç»„ä»¶åº“
- ğŸ”§ **Radix UI** - æ— éšœç¢ç»„ä»¶åŸºç¡€
- ğŸ¨ **Tailwind CSS** - åŸå­åŒ–æ ·å¼
- ğŸ“¦ **ä¼˜åŒ–ä¾èµ–** - ç²¾ç®€çš„åŒ…ä½“ç§¯

**åç«¯ API**
- `POST /api/addresses` - åˆ›å»ºä¸´æ—¶é‚®ç®±
- `GET /api/emails` - è·å–é‚®ä»¶åˆ—è¡¨
- `PATCH /api/emails/[id]` - æ›´æ–°é‚®ä»¶çŠ¶æ€
- `DELETE /api/emails/[id]` - åˆ é™¤é‚®ä»¶
- `POST /api/receive-email` - æ¥æ”¶å¤–éƒ¨é‚®ä»¶
- `POST /api/send-test-email` - å‘é€æµ‹è¯•é‚®ä»¶

**æ•°æ®å±‚**
- PostgreSQL æ•°æ®åº“
- Prisma ORM ç±»å‹å®‰å…¨æ“ä½œ
- è‡ªåŠ¨è¿‡æœŸæ¸…ç†æœºåˆ¶

### æœåŠ¡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Next.js App   â”‚    â”‚   PostgreSQL    â”‚    â”‚    MailHog      â”‚
â”‚  (Frontend/API) â”‚â”€â”€â”€â”€â”‚   (Database)    â”‚    â”‚ (SMTP Testing)  â”‚
â”‚   + UI System   â”‚    â”‚   + Prisma      â”‚    â”‚   + Adminer     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚      Redis      â”‚
                            â”‚   (Optional)    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env)

```env
# æ•°æ®åº“
DATABASE_URL="postgresql://tempmail_user:tempmail_pass@localhost:5432/tempmail_db"

# é‚®ä»¶è®¾ç½®
ALLOWED_DOMAINS="tempmail.local,10minutemail.local,guerrillamail.local"
EMAIL_EXPIRATION_MINUTES=60

# SMTP é…ç½®
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false

# å¯é€‰é…ç½®
NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development
```

### Docker æœåŠ¡

```yaml
services:
  postgres:    # æ•°æ®åº“ (ç«¯å£ 5432)
  redis:       # ç¼“å­˜ (ç«¯å£ 6379)
  mailhog:     # SMTP (ç«¯å£ 1025) + UI (ç«¯å£ 8025)
  adminer:     # æ•°æ®åº“ç®¡ç† (ç«¯å£ 8080)
```

## ğŸ“‹ API ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºé‚®ç®±åœ°å€

```bash
curl -X POST http://localhost:3000/api/addresses \
  -H "Content-Type: application/json" \
  -d '{"expirationMinutes": 60}'
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "emailAddress": {
    "id": "clx...",
    "address": "random123@tempmail.local",
    "createdAt": "2025-01-01T00:00:00.000Z",
    "expiresAt": "2025-01-01T01:00:00.000Z"
  }
}
```

### è·å–é‚®ä»¶åˆ—è¡¨

```bash
curl "http://localhost:3000/api/emails?emailAddressId=clx..."
```

**å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "emails": [
    {
      "id": "clx...",
      "fromAddress": "sender@example.com",
      "subject": "æ¬¢è¿ä½¿ç”¨ä¸´æ—¶é‚®ç®±",
      "textContent": "è¿™æ˜¯é‚®ä»¶å†…å®¹...",
      "receivedAt": "2025-01-01T00:00:00.000Z",
      "isRead": false
    }
  ]
}
```

### å‘é€æµ‹è¯•é‚®ä»¶

```bash
curl -X POST http://localhost:3000/api/send-test-email \
  -H "Content-Type: application/json" \
  -d '{
    "to": "test@tempmail.local",
    "subject": "æµ‹è¯•é‚®ä»¶",
    "content": "è¿™æ˜¯æµ‹è¯•å†…å®¹"
  }'
```

## ğŸ¯ ç”¨æˆ·åŠŸèƒ½æŒ‡å—

### é‚®ç®±ç®¡ç†
1. **ç”Ÿæˆé‚®ç®±** - ç‚¹å‡»"ç”Ÿæˆæ–°é‚®ç®±"æŒ‰é’®
2. **å¤åˆ¶åœ°å€** - ç‚¹å‡»å¤åˆ¶æŒ‰é’®æˆ–é‚®ç®±åœ°å€
3. **å‘é€æµ‹è¯•** - ç‚¹å‡»"å‘é€æµ‹è¯•é‚®ä»¶"éªŒè¯åŠŸèƒ½
4. **è‡ªåŠ¨åˆ·æ–°** - å¼€å¯è‡ªåŠ¨åˆ·æ–°ï¼ˆæ¯10ç§’ï¼‰

### é‚®ä»¶æ“ä½œ
1. **æŸ¥çœ‹é‚®ä»¶** - ç‚¹å‡»é‚®ä»¶åˆ—è¡¨ä¸­çš„é‚®ä»¶
2. **æ ‡è®°å·²è¯»** - ç‚¹å‡»é‚®ä»¶è‡ªåŠ¨æ ‡è®°ä¸ºå·²è¯»
3. **åˆ é™¤é‚®ä»¶** - ç‚¹å‡»åˆ é™¤æŒ‰é’®æˆ–ä½¿ç”¨å³é”®èœå•
4. **é‚®ä»¶æœç´¢** - ä½¿ç”¨é¡¶éƒ¨æœç´¢æ¡†æŸ¥æ‰¾é‚®ä»¶

### ä¸»é¢˜åˆ‡æ¢
1. **åˆ‡æ¢ä¸»é¢˜** - ç‚¹å‡»å³ä¸Šè§’ä¸»é¢˜æŒ‰é’®
2. **é€‰æ‹©æ¨¡å¼** - æµ…è‰²/æ·±è‰²/ç³»ç»Ÿä¸»é¢˜
3. **è‡ªåŠ¨è·Ÿéš** - ç³»ç»Ÿä¸»é¢˜è‡ªåŠ¨è·Ÿéšç³»ç»Ÿè®¾ç½®

### å“åº”å¼ä½“éªŒ
1. **æ¡Œé¢ç«¯** - å®Œæ•´çš„ä¸‰æ å¸ƒå±€
2. **ç§»åŠ¨ç«¯** - è‡ªé€‚åº”å•æ æ˜¾ç¤º
3. **è§¦æ‘¸æ“ä½œ** - ä¼˜åŒ–çš„ç§»åŠ¨ç«¯äº¤äº’

## ğŸ”§ å¼€å‘ä»»åŠ¡

### é¡¹ç›®å‘½ä»¤

```bash
# å¼€å‘
pnpm dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm start            # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm lint             # ä»£ç è´¨é‡æ£€æŸ¥

# æ•°æ®åº“
pnpm db:generate      # ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
pnpm db:migrate       # è¿è¡Œæ•°æ®åº“è¿ç§»
pnpm db:studio        # æ‰“å¼€æ•°æ®åº“æµè§ˆå™¨
pnpm db:reset         # é‡ç½®æ•°æ®åº“
pnpm db:deploy        # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

# Docker
pnpm docker:up        # å¯åŠ¨ Docker æœåŠ¡
pnpm docker:down      # åœæ­¢ Docker æœåŠ¡
pnpm docker:logs      # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
pnpm docker:clean     # æ¸…ç† Docker èµ„æº

# å¿«é€Ÿè®¾ç½®
pnpm setup            # ä¸€é”®ç¯å¢ƒæ­å»º
```

### ç»„ä»¶å¼€å‘

```bash
# æ·»åŠ æ–°çš„ shadcn/ui ç»„ä»¶
npx shadcn-ui@latest add button
npx shadcn-ui@latest add dialog
npx shadcn-ui@latest add toast

# è‡ªå®šä¹‰ç»„ä»¶å¼€å‘
src/components/ui/          # shadcn/ui ç»„ä»¶
src/components/email-*      # é‚®ä»¶ç›¸å…³ç»„ä»¶
src/components/theme-*      # ä¸»é¢˜ç›¸å…³ç»„ä»¶
```

## ğŸ¨ UI ç»„ä»¶æŒ‡å—

### å·²å®ç°ç»„ä»¶

**æ ¸å¿ƒç»„ä»¶**
- `Button` - æŒ‰é’®ç»„ä»¶ï¼Œæ”¯æŒå¤šç§å˜ä½“
- `Input` - è¾“å…¥æ¡†ï¼Œè¡¨å•æ§ä»¶
- `Card` - å¡ç‰‡å®¹å™¨
- `Badge` - å¾½ç« æ ‡ç­¾
- `Avatar` - å¤´åƒç»„ä»¶

**å¸ƒå±€ç»„ä»¶**
- `EmailLayout` - ä¸»å¸ƒå±€å®¹å™¨
- `EmailSidebar` - ä¾§è¾¹æ å¯¼èˆª
- `Sheet` - æŠ½å±‰ç»„ä»¶ï¼ˆç§»åŠ¨ç«¯ï¼‰
- `Separator` - åˆ†å‰²çº¿

**äº¤äº’ç»„ä»¶**
- `EmailList` - é‚®ä»¶åˆ—è¡¨
- `EmailDetail` - é‚®ä»¶è¯¦æƒ…
- `DropdownMenu` - ä¸‹æ‹‰èœå•
- `ThemeToggle` - ä¸»é¢˜åˆ‡æ¢

### ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹

```typescript
// åŸºæœ¬æŒ‰é’®
<Button onClick={handleClick}>
  ç‚¹å‡»æˆ‘
</Button>

// é‚®ä»¶åˆ—è¡¨
<EmailList
  emails={emails}
  selectedEmailId={selectedId}
  onEmailSelect={handleSelect}
  onEmailDelete={handleDelete}
/>

// ä¸»é¢˜åˆ‡æ¢
<ThemeToggle />

// å“åº”å¼å¸ƒå±€
<EmailLayout>
  <div className="flex flex-1 overflow-hidden">
    <div className="w-1/3 border-r">
      <EmailList />
    </div>
    <div className="flex-1">
      <EmailDetail />
    </div>
  </div>
</EmailLayout>
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**UI æ˜¾ç¤ºå¼‚å¸¸**
```bash
# æ¸…é™¤ç¼“å­˜
rm -rf .next node_modules
pnpm install
pnpm dev
```

**ä¸»é¢˜åˆ‡æ¢å¤±è´¥**
```bash
# æ£€æŸ¥ä¸»é¢˜é…ç½®
npm ls next-themes
# é‡æ–°å®‰è£…ä¸»é¢˜ä¾èµ–
pnpm add next-themes
```

**ç»„ä»¶æ ·å¼é—®é¢˜**
```bash
# æ£€æŸ¥ Tailwind CSS é…ç½®
npx tailwindcss build
# é‡æ–°ç”Ÿæˆæ ·å¼
pnpm build
```

**æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# é‡å¯æ•°æ®åº“å®¹å™¨
docker-compose restart postgres
# é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯
pnpm db:generate
```

**SMTP å‘é€å¤±è´¥**
```bash
# æ£€æŸ¥ MailHog çŠ¶æ€
docker logs tempmail-mailhog
# è®¿é—®ç®¡ç†ç•Œé¢
open http://localhost:8025
```

## ğŸš€ éƒ¨ç½²å‡†å¤‡

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. **ç¯å¢ƒå˜é‡è®¾ç½®**
   ```env
   # ç”Ÿäº§æ•°æ®åº“
   DATABASE_URL="postgresql://..."
   
   # çœŸå® SMTP æœåŠ¡
   SMTP_HOST=smtp.gmail.com
   SMTP_PORT=587
   SMTP_USER=your-email@gmail.com
   SMTP_PASS=your-app-password
   
   # åŸŸåé…ç½®
   ALLOWED_DOMAINS="yourdomain.com"
   NEXT_PUBLIC_APP_URL=https://yourdomain.com
   ```

2. **æ€§èƒ½ä¼˜åŒ–**
   - å¯ç”¨æ•°æ®åº“è¿æ¥æ± 
   - é…ç½® Redis ç¼“å­˜
   - è®¾ç½® CDN åŠ é€Ÿ
   - ç›‘æ§ç³»ç»Ÿèµ„æº

3. **å®‰å…¨è®¾ç½®**
   - é™åˆ¶ API è®¿é—®é¢‘ç‡
   - é…ç½® CORS ç­–ç•¥
   - å¯ç”¨è¯·æ±‚æ—¥å¿—
   - è®¾ç½® HTTPS è¯ä¹¦

### éƒ¨ç½²è„šæœ¬

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start

# æˆ–ä½¿ç”¨ PM2
pm2 start ecosystem.config.js
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### å…³é”®æŒ‡æ ‡

**å‰ç«¯æ€§èƒ½**
- é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (FCP)
- æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)
- é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ (FID)
- ç´¯ç§¯å¸ƒå±€åç§» (CLS)

**åç«¯æ€§èƒ½**
- API å“åº”æ—¶é—´
- æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
- é‚®ä»¶å‘é€æˆåŠŸç‡
- å†…å­˜ä½¿ç”¨æƒ…å†µ

### ç›‘æ§å·¥å…·

```bash
# æœ¬åœ°æ€§èƒ½æµ‹è¯•
npm run build
npm run start
lighthouse http://localhost:3000

# ç”Ÿäº§ç›‘æ§
vercel analytics
sentry error tracking
```

---

**ğŸ‰ é¡¹ç›®å·²å®Œå…¨å®ç°ç°ä»£åŒ–é‚®ä»¶ç•Œé¢ï¼** 

âœ¨ **æ–°å¢ç‰¹æ€§**:
- ğŸ“§ Gmail é£æ ¼çš„ä¸‰æ å¸ƒå±€
- ğŸŒ— æ˜æš—ä¸»é¢˜åˆ‡æ¢ç³»ç»Ÿ
- ğŸ“± å®Œç¾çš„ç§»åŠ¨ç«¯é€‚é…
- ğŸ¨ ç°ä»£åŒ–çš„ UI ç»„ä»¶

**æ‰€æœ‰åŠŸèƒ½ç»è¿‡æµ‹è¯•éªŒè¯ï¼Œå¯ç«‹å³éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚** 